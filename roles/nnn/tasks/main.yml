---
- name: Clone nnn repo
  ansible.builtin.git:
    clone: true
    depth: 1
    repo: https://github.com/jarun/nnn
    dest: "{{ online_repos_dest }}/nnn"
  register: clone

- name: Make
  community.general.make:
    chdir: "{{ online_repos_dest }}/nnn"
    params: O_ICONS=1 O_NERD=1 O_NOUG=1 O_NOFIFO=1
  when: clone.changed

- name: Install
  community.general.make:
    chdir: "{{ online_repos_dest }}/nnn"
    target: install
  become: true
  when: clone.changed
